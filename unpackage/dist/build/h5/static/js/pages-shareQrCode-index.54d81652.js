(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-shareQrCode-index"],{"19a5":function(t,e,n){"use strict";var a=n("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.spreadBanner=o;var i=a(n("04c2"));function o(t){return(0,i.default)({url:"/api/spread/banner",method:"get",data:t})}},"3d30":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n("19a5"),i={data:function(){return{cid:"tki-qrcode-canvas",size:180,unit:"upx",val:"",background:"#ffffff",foreground:"#333333",pdground:"#333333",icon:"",iconSize:40,lv:3,onval:!1,loadMake:!1,usingComponents:!1,showLoading:!1,loadingText:"二维码生成中",src:"",ratio:1,ctxSrc:"",loading:!0,canHeight:"",canWeidth:""}},onLoad:function(){this.loadCodeList()},onReady:function(){var t=this,e=this,n=uni.createSelectorQuery();n.select(".content").fields({size:!0},function(e){t.ratio=e.width/750}).exec(),n.select("#qrShareBox").fields({size:!0},function(t){e.canHeight=t.height,e.canWeidth=t.width}).exec()},methods:{loadCodeList:function(){var t=this;(0,a.spreadBanner)({type:2}).then(function(e){t.src=e.data[0].wap_posterQr,t.loadImg(e.data[0].wap_posterQr)}).catch(function(t){uni.showModal({title:"生成失败请刷新页面",showCancel:!1}),uni.hideLoading()})},alertCanv:function(){uni.showModal({title:"请先点击生成图片再下载",showCancel:!1})},showImg:function(){uni.showLoading({title:"图片生成中",mask:!0});var t=this;setTimeout(function(){uni.canvasToTempFilePath({x:0,y:0,width:t.canWeidth,height:t.canHeight,destWidth:t.canWeidth,destHeight:t.canHeight,fileType:"jpg",quality:1,canvasId:"qrShareBox",success:function(e){uni.hideLoading(),uni.showModal({title:"创建成功，长按二维码下载图片",showCancel:!1}),t.loading=!1,t.ctxSrc=e.tempFilePath},fail:function(t){console.log(t)}})},50)},loadImg:function(t){var e=this,n=523,a=700,i=e.ratio,o="/static/img/img14.jpg",c=uni.createCanvasContext("qrShareBox"),r=e.size*i,s=(n-e.size)*i/2,d=a*i,u="#FFFFFF",l=0,f=l/2*i,h=s-f,v=d-f,g=r+l*i,p=d+g+(l+20)*this.ratio,w=24*i,m="",b=(r-w*m.length)/2+s;c.drawImage(o,0,0,e.canWeidth,e.canHeight),c.setFontSize(w),c.fillText(m,b,p),c.beginPath(),c.setLineJoin("round"),c.setLineWidth(l*i),c.setStrokeStyle(u),c.strokeRect(h,v,g,g),c.stroke(),c.drawImage(t,s,d,r,r),c.draw()},creatQrcode:function(){this.$refs.qrcode._makeCode()},saveQrcode:function(){this.$refs.qrcode._saveCode()},qrR:function(t){this.src=t},clearQrcode:function(t){this.$refs.qrcode._clearCode(),this.val=""}}};e.default=i},"3e47":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,'@charset "UTF-8";\n/* 页面左右间距 */\n/* 文字尺寸 */\n/*文字颜色*/\n/* 边框颜色 */\n/*颜色*/\n/* 图片加载中颜色 */\n/* 行为相关颜色 */\n/* 功能栏字体大小 */\n/*功能栏左侧小图标*/.content[data-v-d535e5dc]{padding-top:%?30?%}.qrimg[data-v-d535e5dc]{position:absolute;left:%?-9999?%;top:%?-9999?%}.tki-qrcode-canvas[data-v-d535e5dc]{width:%?532?%;height:%?945?%;margin:0 auto}.share-bottom[data-v-d535e5dc]{width:%?560?%;height:%?80?%;color:#fff;background-color:#5dbc7c;margin:0 auto;font-size:%?30?%;margin-top:%?30?%;border-radius:%?99?%;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.share-bottom.action-share-bottom[data-v-d535e5dc]{background-color:#999}',""])},"59ba":function(t,e,n){"use strict";var a=n("801a"),i=n.n(a);i.a},"78cd":function(t,e,n){"use strict";n.r(e);var a=n("3d30"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);e["default"]=i.a},"801a":function(t,e,n){var a=n("3e47");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("69bad135",a,!0,{sourceMap:!1,shadowMode:!1})},a74f:function(t,e,n){"use strict";n.r(e);var a=n("e169"),i=n("78cd");for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);n("59ba");var c,r=n("f0c5"),s=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"d535e5dc",null,!1,a["a"],c);e["default"]=s.exports},e169:function(t,e,n){"use strict";var a,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"content"},[n("v-uni-canvas",{staticClass:"tki-qrcode-canvas",class:{qrimg:!t.loading},attrs:{id:"qrShareBox","canvas-id":"qrShareBox"},on:{longpress:function(e){arguments[0]=e=t.$handleEvent(e),t.alertCanv.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"tki-qrcode-canvas",style:{display:t.loading?"none":"block"}},[n("v-uni-image",{staticClass:"tki-qrcode-canvas",attrs:{src:t.ctxSrc,mode:"scaleToFill"}})],1),n("v-uni-view",{staticClass:"share-bottom flex",class:{"action-share-bottom":!t.loading},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.loading&&t.showImg()}}},[n("v-uni-text",[t._v(t._s(t.loading?"点击生成图片":"长按二维码下载"))])],1)],1)},o=[];n.d(e,"b",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"a",function(){return a})}}]);